#!/bin/bash

address_book="address_book.txt"

# Function to create address book
create_address_book() {
    > "$address_book"
    echo "Address book created."
}

# Function to view address book
view_address_book() {
    if [ -s "$address_book" ]; then
        cat "$address_book"
    else
        echo "Address book is empty."
    fi
}

# Function to insert a record
insert_record() {
    echo "Enter name: "; read name
    echo "Enter phone: "; read phone
    echo "$name, $phone" >> "$address_book"
    echo "Record inserted."
}

# Function to delete a record
delete_record() {
    echo "Enter name to delete: "; read name
    echo "Enter phone: "; read phone
    if grep -q "^$name, $phone" "$address_book"; then
        grep -v "^$name, $phone" "$address_book" > temp && mv temp "$address_book"
        echo "Record deleted."
    else
        echo "Record not found."
    fi
}

# Function to modify a record
modify_record() {
    echo "Enter name to modify: "; read name
    echo "Enter old phone: "; read old_phone
    if grep -q "^$name, $old_phone" "$address_book"; then
        grep -v "^$name, $old_phone" "$address_book" > temp && mv temp "$address_book"
        echo "Enter new phone: "; read new_phone
        echo "$name, $new_phone" >> "$address_book"
        echo "Record modified."
    else
        echo "Record not found."
    fi
}

# Menu-driven program
while true; do
    echo "Choose an option: a) Create b) View c) Insert d) Delete e) Modify f) Exit"
    read choice
    case $choice in
        a) create_address_book ;;
        b) view_address_book ;;
        c) insert_record ;;
        d) delete_record ;;
        e) modify_record ;;
        f) break ;;
        *) echo "Invalid option." ;;
    esac
done
